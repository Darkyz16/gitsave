{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":49,"index":107}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":108},"end":{"line":3,"column":39,"index":147}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"secureStorage\", {\n    enumerable: true,\n    get: function () {\n      return secureStorage;\n    }\n  });\n  Object.defineProperty(exports, \"authAPI\", {\n    enumerable: true,\n    get: function () {\n      return authAPI;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[4], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // Configuration de l'URL de l'API\n  // En environnement Kubernetes, le backend est accessible via le même domaine\n  // Les routes /api/* sont automatiquement redirigées vers le backend (port 8001)\n  const getAPIUrl = () => {\n    // Sur web, utiliser le même domaine (ingress gère le routing)\n    if (Platform.default.OS === 'web') {\n      if (typeof window !== 'undefined' && window.location) {\n        return window.location.origin;\n      }\n    }\n\n    // Sur mobile, utiliser l'URL configurée\n    const configUrl = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    console.log('📱 Config URL from env:', configUrl);\n    console.log('📱 Platform:', Platform.default.OS);\n\n    // Si l'URL contient 'preview.emergentagent.com', c'est notre environnement\n    if (configUrl && configUrl.includes('emergentagent.com')) {\n      console.log('✅ Utilisation de l\\'URL Emergent:', configUrl);\n      return configUrl;\n    }\n\n    // Fallback pour développement local\n    console.warn('⚠️ Utilisation de localhost - cela ne fonctionnera pas sur mobile réel');\n    return 'http://localhost:8001';\n  };\n  const API_URL = getAPIUrl();\n  console.log('🔧 API URL finale configurée:', API_URL);\n\n  // Créer une instance axios\n  const api = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Helper pour le stockage sécurisé cross-platform\n  const secureStorage = {\n    async getItem(key) {\n      if (Platform.default.OS === 'web') {\n        // Fallback to localStorage for web\n        return localStorage.getItem(key);\n      }\n      return await SecureStore.getItemAsync(key);\n    },\n    async setItem(key, value) {\n      if (Platform.default.OS === 'web') {\n        localStorage.setItem(key, value);\n      } else {\n        await SecureStore.setItemAsync(key, value);\n      }\n    },\n    async deleteItem(key) {\n      if (Platform.default.OS === 'web') {\n        localStorage.removeItem(key);\n      } else {\n        await SecureStore.deleteItemAsync(key);\n      }\n    }\n  };\n  // Intercepteur pour ajouter le token JWT à chaque requête\n  api.interceptors.request.use(async config => {\n    try {\n      const token = await secureStorage.getItem('jwt_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.error('Erreur lors de la récupération du token:', error);\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Intercepteur pour gérer les erreurs de réponse\n  api.interceptors.response.use(response => response, async error => {\n    if (error.response?.status === 401) {\n      // Token invalide ou expiré, supprimer le token\n      await secureStorage.deleteItem('jwt_token');\n    }\n    return Promise.reject(error);\n  });\n\n  // Types\n\n  // Fonctions API\n  const authAPI = {\n    register: async data => {\n      const response = await api.post('/auth/register', data);\n      return response.data;\n    },\n    login: async data => {\n      const response = await api.post('/auth/login', data);\n      return response.data;\n    },\n    getCurrentUser: async () => {\n      const response = await api.get('/auth/me');\n      return response.data;\n    },\n    testAuth: async () => {\n      const response = await api.get('/fec/test-auth');\n      return response.data;\n    }\n  };\n  var _default = api;\n});","lineCount":162,"map":[[27,2,152,0,"Object"],[27,8,152,0],[27,9,152,0,"defineProperty"],[27,23,152,0],[27,24,152,0,"exports"],[27,31,152,0],[28,4,152,0,"enumerable"],[28,14,152,0],[29,4,152,0,"get"],[29,7,152,0],[29,18,152,0,"get"],[29,19,152,0],[30,6,152,0],[30,13,152,0,"_default"],[30,21,152,0],[31,4,152,0],[32,2,152,0],[33,2,72,0,"Object"],[33,8,72,0],[33,9,72,0,"defineProperty"],[33,23,72,0],[33,24,72,0,"exports"],[33,31,72,0],[34,4,72,0,"enumerable"],[34,14,72,0],[35,4,72,0,"get"],[35,7,72,0],[35,18,72,0,"get"],[35,19,72,0],[36,6,72,0],[36,13,72,9,"secureStorage"],[36,26,72,22],[37,4,72,22],[38,2,72,22],[39,2,130,0,"Object"],[39,8,130,0],[39,9,130,0,"defineProperty"],[39,23,130,0],[39,24,130,0,"exports"],[39,31,130,0],[40,4,130,0,"enumerable"],[40,14,130,0],[41,4,130,0,"get"],[41,7,130,0],[41,18,130,0,"get"],[41,19,130,0],[42,6,130,0],[42,13,130,0,"authAPI"],[42,20,130,0],[43,4,130,0],[44,2,130,0],[45,2,150,2],[45,6,150,2,"_expoVirtualEnv"],[45,21,150,2],[45,24,150,2,"require"],[45,31,150,2],[45,32,150,2,"_dependencyMap"],[45,46,150,2],[46,2,1,0],[46,6,1,0,"_axios"],[46,12,1,0],[46,15,1,0,"require"],[46,22,1,0],[46,23,1,0,"_dependencyMap"],[46,37,1,0],[47,2,1,0],[47,6,1,0,"axios"],[47,11,1,0],[47,14,1,0,"_interopDefault"],[47,29,1,0],[47,30,1,0,"_axios"],[47,36,1,0],[48,2,2,0],[48,6,2,0,"_expoSecureStore"],[48,22,2,0],[48,25,2,0,"require"],[48,32,2,0],[48,33,2,0,"_dependencyMap"],[48,47,2,0],[49,2,2,0],[49,6,2,0,"SecureStore"],[49,17,2,0],[49,20,2,0,"_interopNamespace"],[49,37,2,0],[49,38,2,0,"_expoSecureStore"],[49,54,2,0],[50,2,3,0],[50,6,3,0,"_expoConstants"],[50,20,3,0],[50,23,3,0,"require"],[50,30,3,0],[50,31,3,0,"_dependencyMap"],[50,45,3,0],[51,2,3,0],[51,6,3,0,"Constants"],[51,15,3,0],[51,18,3,0,"_interopDefault"],[51,33,3,0],[51,34,3,0,"_expoConstants"],[51,48,3,0],[52,2,3,39],[52,6,3,39,"_reactNativeWebDistExportsPlatform"],[52,40,3,39],[52,43,3,39,"require"],[52,50,3,39],[52,51,3,39,"_dependencyMap"],[52,65,3,39],[53,2,3,39],[53,6,3,39,"Platform"],[53,14,3,39],[53,17,3,39,"_interopDefault"],[53,32,3,39],[53,33,3,39,"_reactNativeWebDistExportsPlatform"],[53,67,3,39],[54,2,6,0],[55,2,7,0],[56,2,8,0],[57,2,9,0],[57,8,9,6,"getAPIUrl"],[57,17,9,15],[57,20,9,18,"getAPIUrl"],[57,21,9,18],[57,26,9,24],[58,4,10,2],[59,4,11,2],[59,8,11,6,"Platform"],[59,16,11,14],[59,17,11,14,"default"],[59,24,11,14],[59,25,11,15,"OS"],[59,27,11,17],[59,32,11,22],[59,37,11,27],[59,39,11,29],[60,6,12,4],[60,10,12,8],[60,17,12,15,"window"],[60,23,12,21],[60,28,12,26],[60,39,12,37],[60,43,12,41,"window"],[60,49,12,47],[60,50,12,48,"location"],[60,58,12,56],[60,60,12,58],[61,8,13,6],[61,15,13,13,"window"],[61,21,13,19],[61,22,13,20,"location"],[61,30,13,28],[61,31,13,29,"origin"],[61,37,13,35],[62,6,14,4],[63,4,15,2],[65,4,17,2],[66,4,18,2],[66,10,18,8,"configUrl"],[66,19,18,17],[66,22,18,20,"Constants"],[66,31,18,29],[66,32,18,29,"default"],[66,39,18,29],[66,40,18,30,"expoConfig"],[66,50,18,40],[66,52,18,42,"extra"],[66,57,18,47],[66,59,18,49,"EXPO_PUBLIC_BACKEND_URL"],[66,82,18,72],[66,86,18,72,"_expoVirtualEnv"],[66,101,18,72],[66,102,18,72,"env"],[66,105,18,72],[66,106,18,72,"EXPO_PUBLIC_BACKEND_URL"],[66,129,18,111],[67,4,20,2,"console"],[67,11,20,9],[67,12,20,10,"log"],[67,15,20,13],[67,16,20,14],[67,41,20,39],[67,43,20,41,"configUrl"],[67,52,20,50],[67,53,20,51],[68,4,21,2,"console"],[68,11,21,9],[68,12,21,10,"log"],[68,15,21,13],[68,16,21,14],[68,30,21,28],[68,32,21,30,"Platform"],[68,40,21,38],[68,41,21,38,"default"],[68,48,21,38],[68,49,21,39,"OS"],[68,51,21,41],[68,52,21,42],[70,4,23,2],[71,4,24,2],[71,8,24,6,"configUrl"],[71,17,24,15],[71,21,24,19,"configUrl"],[71,30,24,28],[71,31,24,29,"includes"],[71,39,24,37],[71,40,24,38],[71,59,24,57],[71,60,24,58],[71,62,24,60],[72,6,25,4,"console"],[72,13,25,11],[72,14,25,12,"log"],[72,17,25,15],[72,18,25,16],[72,53,25,51],[72,55,25,53,"configUrl"],[72,64,25,62],[72,65,25,63],[73,6,26,4],[73,13,26,11,"configUrl"],[73,22,26,20],[74,4,27,2],[76,4,29,2],[77,4,30,2,"console"],[77,11,30,9],[77,12,30,10,"warn"],[77,16,30,14],[77,17,30,15],[77,89,30,87],[77,90,30,88],[78,4,31,2],[78,11,31,9],[78,34,31,32],[79,2,32,0],[79,3,32,1],[80,2,34,0],[80,8,34,6,"API_URL"],[80,15,34,13],[80,18,34,16,"getAPIUrl"],[80,27,34,25],[80,28,34,26],[80,29,34,27],[81,2,36,0,"console"],[81,9,36,7],[81,10,36,8,"log"],[81,13,36,11],[81,14,36,12],[81,45,36,43],[81,47,36,45,"API_URL"],[81,54,36,52],[81,55,36,53],[83,2,38,0],[84,2,39,0],[84,8,39,6,"api"],[84,11,39,24],[84,14,39,27,"axios"],[84,19,39,32],[84,20,39,32,"default"],[84,27,39,32],[84,28,39,33,"create"],[84,34,39,39],[84,35,39,40],[85,4,40,2,"baseURL"],[85,11,40,9],[85,13,40,11],[85,16,40,14,"API_URL"],[85,23,40,21],[85,29,40,27],[86,4,41,2,"timeout"],[86,11,41,9],[86,13,41,11],[86,18,41,16],[87,4,42,2,"headers"],[87,11,42,9],[87,13,42,11],[88,6,43,4],[88,20,43,18],[88,22,43,20],[89,4,44,2],[90,2,45,0],[90,3,45,1],[90,4,45,2],[92,2,47,0],[93,2,48,0],[93,8,48,6,"secureStorage"],[93,21,48,19],[93,24,48,22],[94,4,49,2],[94,10,49,8,"getItem"],[94,17,49,15,"getItem"],[94,18,49,16,"key"],[94,21,49,27],[94,23,49,53],[95,6,50,4],[95,10,50,8,"Platform"],[95,18,50,16],[95,19,50,16,"default"],[95,26,50,16],[95,27,50,17,"OS"],[95,29,50,19],[95,34,50,24],[95,39,50,29],[95,41,50,31],[96,8,51,6],[97,8,52,6],[97,15,52,13,"localStorage"],[97,27,52,25],[97,28,52,26,"getItem"],[97,35,52,33],[97,36,52,34,"key"],[97,39,52,37],[97,40,52,38],[98,6,53,4],[99,6,54,4],[99,13,54,11],[99,19,54,17,"SecureStore"],[99,30,54,28],[99,31,54,29,"getItemAsync"],[99,43,54,41],[99,44,54,42,"key"],[99,47,54,45],[99,48,54,46],[100,4,55,2],[100,5,55,3],[101,4,56,2],[101,10,56,8,"setItem"],[101,17,56,15,"setItem"],[101,18,56,16,"key"],[101,21,56,27],[101,23,56,29,"value"],[101,28,56,42],[101,30,56,59],[102,6,57,4],[102,10,57,8,"Platform"],[102,18,57,16],[102,19,57,16,"default"],[102,26,57,16],[102,27,57,17,"OS"],[102,29,57,19],[102,34,57,24],[102,39,57,29],[102,41,57,31],[103,8,58,6,"localStorage"],[103,20,58,18],[103,21,58,19,"setItem"],[103,28,58,26],[103,29,58,27,"key"],[103,32,58,30],[103,34,58,32,"value"],[103,39,58,37],[103,40,58,38],[104,6,59,4],[104,7,59,5],[104,13,59,11],[105,8,60,6],[105,14,60,12,"SecureStore"],[105,25,60,23],[105,26,60,24,"setItemAsync"],[105,38,60,36],[105,39,60,37,"key"],[105,42,60,40],[105,44,60,42,"value"],[105,49,60,47],[105,50,60,48],[106,6,61,4],[107,4,62,2],[107,5,62,3],[108,4,63,2],[108,10,63,8,"deleteItem"],[108,20,63,18,"deleteItem"],[108,21,63,19,"key"],[108,24,63,30],[108,26,63,47],[109,6,64,4],[109,10,64,8,"Platform"],[109,18,64,16],[109,19,64,16,"default"],[109,26,64,16],[109,27,64,17,"OS"],[109,29,64,19],[109,34,64,24],[109,39,64,29],[109,41,64,31],[110,8,65,6,"localStorage"],[110,20,65,18],[110,21,65,19,"removeItem"],[110,31,65,29],[110,32,65,30,"key"],[110,35,65,33],[110,36,65,34],[111,6,66,4],[111,7,66,5],[111,13,66,11],[112,8,67,6],[112,14,67,12,"SecureStore"],[112,25,67,23],[112,26,67,24,"deleteItemAsync"],[112,41,67,39],[112,42,67,40,"key"],[112,45,67,43],[112,46,67,44],[113,6,68,4],[114,4,69,2],[115,2,70,0],[115,3,70,1],[116,2,74,0],[117,2,75,0,"api"],[117,5,75,3],[117,6,75,4,"interceptors"],[117,18,75,16],[117,19,75,17,"request"],[117,26,75,24],[117,27,75,25,"use"],[117,30,75,28],[117,31,76,2],[117,37,76,9,"config"],[117,43,76,15],[117,47,76,20],[118,4,77,4],[118,8,77,8],[119,6,78,6],[119,12,78,12,"token"],[119,17,78,17],[119,20,78,20],[119,26,78,26,"secureStorage"],[119,39,78,39],[119,40,78,40,"getItem"],[119,47,78,47],[119,48,78,48],[119,59,78,59],[119,60,78,60],[120,6,79,6],[120,10,79,10,"token"],[120,15,79,15],[120,17,79,17],[121,8,80,8,"config"],[121,14,80,14],[121,15,80,15,"headers"],[121,22,80,22],[121,23,80,23,"Authorization"],[121,36,80,36],[121,39,80,39],[121,49,80,49,"token"],[121,54,80,54],[121,56,80,56],[122,6,81,6],[123,4,82,4],[123,5,82,5],[123,6,82,6],[123,13,82,13,"error"],[123,18,82,18],[123,20,82,20],[124,6,83,6,"console"],[124,13,83,13],[124,14,83,14,"error"],[124,19,83,19],[124,20,83,20],[124,62,83,62],[124,64,83,64,"error"],[124,69,83,69],[124,70,83,70],[125,4,84,4],[126,4,85,4],[126,11,85,11,"config"],[126,17,85,17],[127,2,86,2],[127,3,86,3],[127,5,87,3,"error"],[127,10,87,8],[127,14,87,13],[128,4,88,4],[128,11,88,11,"Promise"],[128,18,88,18],[128,19,88,19,"reject"],[128,25,88,25],[128,26,88,26,"error"],[128,31,88,31],[128,32,88,32],[129,2,89,2],[129,3,90,0],[129,4,90,1],[131,2,92,0],[132,2,93,0,"api"],[132,5,93,3],[132,6,93,4,"interceptors"],[132,18,93,16],[132,19,93,17,"response"],[132,27,93,25],[132,28,93,26,"use"],[132,31,93,29],[132,32,94,3,"response"],[132,40,94,11],[132,44,94,16,"response"],[132,52,94,24],[132,54,95,2],[132,60,95,9,"error"],[132,65,95,26],[132,69,95,31],[133,4,96,4],[133,8,96,8,"error"],[133,13,96,13],[133,14,96,14,"response"],[133,22,96,22],[133,24,96,24,"status"],[133,30,96,30],[133,35,96,35],[133,38,96,38],[133,40,96,40],[134,6,97,6],[135,6,98,6],[135,12,98,12,"secureStorage"],[135,25,98,25],[135,26,98,26,"deleteItem"],[135,36,98,36],[135,37,98,37],[135,48,98,48],[135,49,98,49],[136,4,99,4],[137,4,100,4],[137,11,100,11,"Promise"],[137,18,100,18],[137,19,100,19,"reject"],[137,25,100,25],[137,26,100,26,"error"],[137,31,100,31],[137,32,100,32],[138,2,101,2],[138,3,102,0],[138,4,102,1],[140,2,104,0],[142,2,129,0],[143,2,130,7],[143,8,130,13,"authAPI"],[143,15,130,20],[143,18,130,23],[144,4,131,2,"register"],[144,12,131,10],[144,14,131,12],[144,20,131,19,"data"],[144,24,131,37],[144,28,131,57],[145,6,132,4],[145,12,132,10,"response"],[145,20,132,18],[145,23,132,21],[145,29,132,27,"api"],[145,32,132,30],[145,33,132,31,"post"],[145,37,132,35],[145,38,132,42],[145,54,132,58],[145,56,132,60,"data"],[145,60,132,64],[145,61,132,65],[146,6,133,4],[146,13,133,11,"response"],[146,21,133,19],[146,22,133,20,"data"],[146,26,133,24],[147,4,134,2],[147,5,134,3],[148,4,136,2,"login"],[148,9,136,7],[148,11,136,9],[148,17,136,16,"data"],[148,21,136,31],[148,25,136,60],[149,6,137,4],[149,12,137,10,"response"],[149,20,137,18],[149,23,137,21],[149,29,137,27,"api"],[149,32,137,30],[149,33,137,31,"post"],[149,37,137,35],[149,38,137,51],[149,51,137,64],[149,53,137,66,"data"],[149,57,137,70],[149,58,137,71],[150,6,138,4],[150,13,138,11,"response"],[150,21,138,19],[150,22,138,20,"data"],[150,26,138,24],[151,4,139,2],[151,5,139,3],[152,4,141,2,"getCurrentUser"],[152,18,141,16],[152,20,141,18],[152,26,141,18,"getCurrentUser"],[152,27,141,18],[152,32,141,45],[153,6,142,4],[153,12,142,10,"response"],[153,20,142,18],[153,23,142,21],[153,29,142,27,"api"],[153,32,142,30],[153,33,142,31,"get"],[153,36,142,34],[153,37,142,41],[153,47,142,51],[153,48,142,52],[154,6,143,4],[154,13,143,11,"response"],[154,21,143,19],[154,22,143,20,"data"],[154,26,143,24],[155,4,144,2],[155,5,144,3],[156,4,146,2,"testAuth"],[156,12,146,10],[156,14,146,12],[156,20,146,12,"testAuth"],[156,21,146,12],[156,26,146,74],[157,6,147,4],[157,12,147,10,"response"],[157,20,147,18],[157,23,147,21],[157,29,147,27,"api"],[157,32,147,30],[157,33,147,31,"get"],[157,36,147,34],[157,37,147,35],[157,53,147,51],[157,54,147,52],[158,6,148,4],[158,13,148,11,"response"],[158,21,148,19],[158,22,148,20,"data"],[158,26,148,24],[159,4,149,2],[160,2,150,0],[160,3,150,1],[161,2,152,0],[161,6,152,0,"_default"],[161,14,152,0],[161,17,152,15,"api"],[161,20,152,18],[162,0,152,19],[162,3]],"functionMap":{"names":["<global>","getAPIUrl","secureStorage.getItem","secureStorage.setItem","secureStorage.deleteItem","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","authAPI.register","authAPI.login","authAPI.getCurrentUser","authAPI.testAuth"],"mappings":"AAA;kBCQ;CDuB;EEiB;GFM;EGC;GHM;EIC;GJM;EKO;GLU;EMC;GNE;EOK,sBP;EQC;GRM;YS8B;GTG;SUE;GVG;kBWE;GXG;YYE;GZG"},"hasCjsExports":false},"type":"js/module"}]}