{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":57,"index":57}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":58},"end":{"line":2,"column":49,"index":107}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":108},"end":{"line":3,"column":39,"index":147}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"secureStorage\", {\n    enumerable: true,\n    get: function () {\n      return secureStorage;\n    }\n  });\n  Object.defineProperty(exports, \"authAPI\", {\n    enumerable: true,\n    get: function () {\n      return authAPI;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  // Configuration de l'URL de l'API\n  // En environnement Kubernetes, le backend est accessible via le même domaine\n  // Les routes /api/* sont automatiquement redirigées vers le backend (port 8001)\n  const getAPIUrl = () => {\n    // Sur web, utiliser le même domaine (ingress gère le routing)\n    if (Platform.default.OS === 'web') {\n      if (false && window.location) {\n        return window.location.origin;\n      }\n    }\n\n    // Sur mobile, utiliser l'URL configurée\n    const configUrl = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL;\n    console.log('📱 Config URL from env:', configUrl);\n    console.log('📱 Platform:', Platform.default.OS);\n\n    // Si l'URL contient 'preview.emergentagent.com', c'est notre environnement\n    if (configUrl && configUrl.includes('emergentagent.com')) {\n      console.log('✅ Utilisation de l\\'URL Emergent:', configUrl);\n      return configUrl;\n    }\n\n    // Fallback pour développement local\n    console.warn('⚠️ Utilisation de localhost - cela ne fonctionnera pas sur mobile réel');\n    return 'http://localhost:8001';\n  };\n  const API_URL = getAPIUrl();\n  console.log('🔧 API URL finale configurée:', API_URL);\n\n  // Créer une instance axios\n  const api = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    timeout: 30000,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Helper pour le stockage sécurisé cross-platform\n  const secureStorage = {\n    async getItem(key) {\n      if (Platform.default.OS === 'web') {\n        // Fallback to localStorage for web\n        return localStorage.getItem(key);\n      }\n      return await SecureStore.getItemAsync(key);\n    },\n    async setItem(key, value) {\n      if (Platform.default.OS === 'web') {\n        localStorage.setItem(key, value);\n      } else {\n        await SecureStore.setItemAsync(key, value);\n      }\n    },\n    async deleteItem(key) {\n      if (Platform.default.OS === 'web') {\n        localStorage.removeItem(key);\n      } else {\n        await SecureStore.deleteItemAsync(key);\n      }\n    }\n  };\n  // Intercepteur pour ajouter le token JWT à chaque requête\n  api.interceptors.request.use(async config => {\n    try {\n      const token = await secureStorage.getItem('jwt_token');\n      if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n    } catch (error) {\n      console.error('Erreur lors de la récupération du token:', error);\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Intercepteur pour gérer les erreurs de réponse\n  api.interceptors.response.use(response => response, async error => {\n    if (error.response?.status === 401) {\n      // Token invalide ou expiré, supprimer le token\n      await secureStorage.deleteItem('jwt_token');\n    }\n    return Promise.reject(error);\n  });\n\n  // Types\n\n  // Fonctions API\n  const authAPI = {\n    register: async data => {\n      const response = await api.post('/auth/register', data);\n      return response.data;\n    },\n    login: async data => {\n      const response = await api.post('/auth/login', data);\n      return response.data;\n    },\n    getCurrentUser: async () => {\n      const response = await api.get('/auth/me');\n      return response.data;\n    },\n    testAuth: async () => {\n      const response = await api.get('/fec/test-auth');\n      return response.data;\n    }\n  };\n  var _default = api;\n});","lineCount":161,"map":[[27,2,152,0,"Object"],[27,8,152,0],[27,9,152,0,"defineProperty"],[27,23,152,0],[27,24,152,0,"exports"],[27,31,152,0],[28,4,152,0,"enumerable"],[28,14,152,0],[29,4,152,0,"get"],[29,7,152,0],[29,18,152,0,"get"],[29,19,152,0],[30,6,152,0],[30,13,152,0,"_default"],[30,21,152,0],[31,4,152,0],[32,2,152,0],[33,2,72,0,"Object"],[33,8,72,0],[33,9,72,0,"defineProperty"],[33,23,72,0],[33,24,72,0,"exports"],[33,31,72,0],[34,4,72,0,"enumerable"],[34,14,72,0],[35,4,72,0,"get"],[35,7,72,0],[35,18,72,0,"get"],[35,19,72,0],[36,6,72,0],[36,13,72,9,"secureStorage"],[36,26,72,22],[37,4,72,22],[38,2,72,22],[39,2,130,0,"Object"],[39,8,130,0],[39,9,130,0,"defineProperty"],[39,23,130,0],[39,24,130,0,"exports"],[39,31,130,0],[40,4,130,0,"enumerable"],[40,14,130,0],[41,4,130,0,"get"],[41,7,130,0],[41,18,130,0,"get"],[41,19,130,0],[42,6,130,0],[42,13,130,0,"authAPI"],[42,20,130,0],[43,4,130,0],[44,2,130,0],[45,2,1,0],[45,6,1,0,"_axios"],[45,12,1,0],[45,15,1,0,"require"],[45,22,1,0],[45,23,1,0,"_dependencyMap"],[45,37,1,0],[46,2,1,0],[46,6,1,0,"axios"],[46,11,1,0],[46,14,1,0,"_interopDefault"],[46,29,1,0],[46,30,1,0,"_axios"],[46,36,1,0],[47,2,2,0],[47,6,2,0,"_expoSecureStore"],[47,22,2,0],[47,25,2,0,"require"],[47,32,2,0],[47,33,2,0,"_dependencyMap"],[47,47,2,0],[48,2,2,0],[48,6,2,0,"SecureStore"],[48,17,2,0],[48,20,2,0,"_interopNamespace"],[48,37,2,0],[48,38,2,0,"_expoSecureStore"],[48,54,2,0],[49,2,3,0],[49,6,3,0,"_expoConstants"],[49,20,3,0],[49,23,3,0,"require"],[49,30,3,0],[49,31,3,0,"_dependencyMap"],[49,45,3,0],[50,2,3,0],[50,6,3,0,"Constants"],[50,15,3,0],[50,18,3,0,"_interopDefault"],[50,33,3,0],[50,34,3,0,"_expoConstants"],[50,48,3,0],[51,2,3,39],[51,6,3,39,"_reactNativeWebDistExportsPlatform"],[51,40,3,39],[51,43,3,39,"require"],[51,50,3,39],[51,51,3,39,"_dependencyMap"],[51,65,3,39],[52,2,3,39],[52,6,3,39,"Platform"],[52,14,3,39],[52,17,3,39,"_interopDefault"],[52,32,3,39],[52,33,3,39,"_reactNativeWebDistExportsPlatform"],[52,67,3,39],[53,2,6,0],[54,2,7,0],[55,2,8,0],[56,2,9,0],[56,8,9,6,"getAPIUrl"],[56,17,9,15],[56,20,9,18,"getAPIUrl"],[56,21,9,18],[56,26,9,24],[57,4,10,2],[58,4,11,2],[58,8,11,6,"Platform"],[58,16,11,14],[58,17,11,14,"default"],[58,24,11,14],[58,25,11,15,"OS"],[58,27,11,17],[58,32,11,22],[58,37,11,27],[58,39,11,29],[59,6,12,4],[59,10,12,8],[59,19,12,41,"window"],[59,25,12,47],[59,26,12,48,"location"],[59,34,12,56],[59,36,12,58],[60,8,13,6],[60,15,13,13,"window"],[60,21,13,19],[60,22,13,20,"location"],[60,30,13,28],[60,31,13,29,"origin"],[60,37,13,35],[61,6,14,4],[62,4,15,2],[64,4,17,2],[65,4,18,2],[65,10,18,8,"configUrl"],[65,19,18,17],[65,22,18,20,"Constants"],[65,31,18,29],[65,32,18,29,"default"],[65,39,18,29],[65,40,18,30,"expoConfig"],[65,50,18,40],[65,52,18,42,"extra"],[65,57,18,47],[65,59,18,49,"EXPO_PUBLIC_BACKEND_URL"],[65,82,18,72],[65,86,18,76,"process"],[65,93,18,83],[65,94,18,84,"env"],[65,97,18,87],[65,98,18,88,"EXPO_PUBLIC_BACKEND_URL"],[65,121,18,111],[66,4,20,2,"console"],[66,11,20,9],[66,12,20,10,"log"],[66,15,20,13],[66,16,20,14],[66,41,20,39],[66,43,20,41,"configUrl"],[66,52,20,50],[66,53,20,51],[67,4,21,2,"console"],[67,11,21,9],[67,12,21,10,"log"],[67,15,21,13],[67,16,21,14],[67,30,21,28],[67,32,21,30,"Platform"],[67,40,21,38],[67,41,21,38,"default"],[67,48,21,38],[67,49,21,39,"OS"],[67,51,21,41],[67,52,21,42],[69,4,23,2],[70,4,24,2],[70,8,24,6,"configUrl"],[70,17,24,15],[70,21,24,19,"configUrl"],[70,30,24,28],[70,31,24,29,"includes"],[70,39,24,37],[70,40,24,38],[70,59,24,57],[70,60,24,58],[70,62,24,60],[71,6,25,4,"console"],[71,13,25,11],[71,14,25,12,"log"],[71,17,25,15],[71,18,25,16],[71,53,25,51],[71,55,25,53,"configUrl"],[71,64,25,62],[71,65,25,63],[72,6,26,4],[72,13,26,11,"configUrl"],[72,22,26,20],[73,4,27,2],[75,4,29,2],[76,4,30,2,"console"],[76,11,30,9],[76,12,30,10,"warn"],[76,16,30,14],[76,17,30,15],[76,89,30,87],[76,90,30,88],[77,4,31,2],[77,11,31,9],[77,34,31,32],[78,2,32,0],[78,3,32,1],[79,2,34,0],[79,8,34,6,"API_URL"],[79,15,34,13],[79,18,34,16,"getAPIUrl"],[79,27,34,25],[79,28,34,26],[79,29,34,27],[80,2,36,0,"console"],[80,9,36,7],[80,10,36,8,"log"],[80,13,36,11],[80,14,36,12],[80,45,36,43],[80,47,36,45,"API_URL"],[80,54,36,52],[80,55,36,53],[82,2,38,0],[83,2,39,0],[83,8,39,6,"api"],[83,11,39,24],[83,14,39,27,"axios"],[83,19,39,32],[83,20,39,32,"default"],[83,27,39,32],[83,28,39,33,"create"],[83,34,39,39],[83,35,39,40],[84,4,40,2,"baseURL"],[84,11,40,9],[84,13,40,11],[84,16,40,14,"API_URL"],[84,23,40,21],[84,29,40,27],[85,4,41,2,"timeout"],[85,11,41,9],[85,13,41,11],[85,18,41,16],[86,4,42,2,"headers"],[86,11,42,9],[86,13,42,11],[87,6,43,4],[87,20,43,18],[87,22,43,20],[88,4,44,2],[89,2,45,0],[89,3,45,1],[89,4,45,2],[91,2,47,0],[92,2,48,0],[92,8,48,6,"secureStorage"],[92,21,48,19],[92,24,48,22],[93,4,49,2],[93,10,49,8,"getItem"],[93,17,49,15,"getItem"],[93,18,49,16,"key"],[93,21,49,27],[93,23,49,53],[94,6,50,4],[94,10,50,8,"Platform"],[94,18,50,16],[94,19,50,16,"default"],[94,26,50,16],[94,27,50,17,"OS"],[94,29,50,19],[94,34,50,24],[94,39,50,29],[94,41,50,31],[95,8,51,6],[96,8,52,6],[96,15,52,13,"localStorage"],[96,27,52,25],[96,28,52,26,"getItem"],[96,35,52,33],[96,36,52,34,"key"],[96,39,52,37],[96,40,52,38],[97,6,53,4],[98,6,54,4],[98,13,54,11],[98,19,54,17,"SecureStore"],[98,30,54,28],[98,31,54,29,"getItemAsync"],[98,43,54,41],[98,44,54,42,"key"],[98,47,54,45],[98,48,54,46],[99,4,55,2],[99,5,55,3],[100,4,56,2],[100,10,56,8,"setItem"],[100,17,56,15,"setItem"],[100,18,56,16,"key"],[100,21,56,27],[100,23,56,29,"value"],[100,28,56,42],[100,30,56,59],[101,6,57,4],[101,10,57,8,"Platform"],[101,18,57,16],[101,19,57,16,"default"],[101,26,57,16],[101,27,57,17,"OS"],[101,29,57,19],[101,34,57,24],[101,39,57,29],[101,41,57,31],[102,8,58,6,"localStorage"],[102,20,58,18],[102,21,58,19,"setItem"],[102,28,58,26],[102,29,58,27,"key"],[102,32,58,30],[102,34,58,32,"value"],[102,39,58,37],[102,40,58,38],[103,6,59,4],[103,7,59,5],[103,13,59,11],[104,8,60,6],[104,14,60,12,"SecureStore"],[104,25,60,23],[104,26,60,24,"setItemAsync"],[104,38,60,36],[104,39,60,37,"key"],[104,42,60,40],[104,44,60,42,"value"],[104,49,60,47],[104,50,60,48],[105,6,61,4],[106,4,62,2],[106,5,62,3],[107,4,63,2],[107,10,63,8,"deleteItem"],[107,20,63,18,"deleteItem"],[107,21,63,19,"key"],[107,24,63,30],[107,26,63,47],[108,6,64,4],[108,10,64,8,"Platform"],[108,18,64,16],[108,19,64,16,"default"],[108,26,64,16],[108,27,64,17,"OS"],[108,29,64,19],[108,34,64,24],[108,39,64,29],[108,41,64,31],[109,8,65,6,"localStorage"],[109,20,65,18],[109,21,65,19,"removeItem"],[109,31,65,29],[109,32,65,30,"key"],[109,35,65,33],[109,36,65,34],[110,6,66,4],[110,7,66,5],[110,13,66,11],[111,8,67,6],[111,14,67,12,"SecureStore"],[111,25,67,23],[111,26,67,24,"deleteItemAsync"],[111,41,67,39],[111,42,67,40,"key"],[111,45,67,43],[111,46,67,44],[112,6,68,4],[113,4,69,2],[114,2,70,0],[114,3,70,1],[115,2,74,0],[116,2,75,0,"api"],[116,5,75,3],[116,6,75,4,"interceptors"],[116,18,75,16],[116,19,75,17,"request"],[116,26,75,24],[116,27,75,25,"use"],[116,30,75,28],[116,31,76,2],[116,37,76,9,"config"],[116,43,76,15],[116,47,76,20],[117,4,77,4],[117,8,77,8],[118,6,78,6],[118,12,78,12,"token"],[118,17,78,17],[118,20,78,20],[118,26,78,26,"secureStorage"],[118,39,78,39],[118,40,78,40,"getItem"],[118,47,78,47],[118,48,78,48],[118,59,78,59],[118,60,78,60],[119,6,79,6],[119,10,79,10,"token"],[119,15,79,15],[119,17,79,17],[120,8,80,8,"config"],[120,14,80,14],[120,15,80,15,"headers"],[120,22,80,22],[120,23,80,23,"Authorization"],[120,36,80,36],[120,39,80,39],[120,49,80,49,"token"],[120,54,80,54],[120,56,80,56],[121,6,81,6],[122,4,82,4],[122,5,82,5],[122,6,82,6],[122,13,82,13,"error"],[122,18,82,18],[122,20,82,20],[123,6,83,6,"console"],[123,13,83,13],[123,14,83,14,"error"],[123,19,83,19],[123,20,83,20],[123,62,83,62],[123,64,83,64,"error"],[123,69,83,69],[123,70,83,70],[124,4,84,4],[125,4,85,4],[125,11,85,11,"config"],[125,17,85,17],[126,2,86,2],[126,3,86,3],[126,5,87,3,"error"],[126,10,87,8],[126,14,87,13],[127,4,88,4],[127,11,88,11,"Promise"],[127,18,88,18],[127,19,88,19,"reject"],[127,25,88,25],[127,26,88,26,"error"],[127,31,88,31],[127,32,88,32],[128,2,89,2],[128,3,90,0],[128,4,90,1],[130,2,92,0],[131,2,93,0,"api"],[131,5,93,3],[131,6,93,4,"interceptors"],[131,18,93,16],[131,19,93,17,"response"],[131,27,93,25],[131,28,93,26,"use"],[131,31,93,29],[131,32,94,3,"response"],[131,40,94,11],[131,44,94,16,"response"],[131,52,94,24],[131,54,95,2],[131,60,95,9,"error"],[131,65,95,26],[131,69,95,31],[132,4,96,4],[132,8,96,8,"error"],[132,13,96,13],[132,14,96,14,"response"],[132,22,96,22],[132,24,96,24,"status"],[132,30,96,30],[132,35,96,35],[132,38,96,38],[132,40,96,40],[133,6,97,6],[134,6,98,6],[134,12,98,12,"secureStorage"],[134,25,98,25],[134,26,98,26,"deleteItem"],[134,36,98,36],[134,37,98,37],[134,48,98,48],[134,49,98,49],[135,4,99,4],[136,4,100,4],[136,11,100,11,"Promise"],[136,18,100,18],[136,19,100,19,"reject"],[136,25,100,25],[136,26,100,26,"error"],[136,31,100,31],[136,32,100,32],[137,2,101,2],[137,3,102,0],[137,4,102,1],[139,2,104,0],[141,2,129,0],[142,2,130,7],[142,8,130,13,"authAPI"],[142,15,130,20],[142,18,130,23],[143,4,131,2,"register"],[143,12,131,10],[143,14,131,12],[143,20,131,19,"data"],[143,24,131,37],[143,28,131,57],[144,6,132,4],[144,12,132,10,"response"],[144,20,132,18],[144,23,132,21],[144,29,132,27,"api"],[144,32,132,30],[144,33,132,31,"post"],[144,37,132,35],[144,38,132,42],[144,54,132,58],[144,56,132,60,"data"],[144,60,132,64],[144,61,132,65],[145,6,133,4],[145,13,133,11,"response"],[145,21,133,19],[145,22,133,20,"data"],[145,26,133,24],[146,4,134,2],[146,5,134,3],[147,4,136,2,"login"],[147,9,136,7],[147,11,136,9],[147,17,136,16,"data"],[147,21,136,31],[147,25,136,60],[148,6,137,4],[148,12,137,10,"response"],[148,20,137,18],[148,23,137,21],[148,29,137,27,"api"],[148,32,137,30],[148,33,137,31,"post"],[148,37,137,35],[148,38,137,51],[148,51,137,64],[148,53,137,66,"data"],[148,57,137,70],[148,58,137,71],[149,6,138,4],[149,13,138,11,"response"],[149,21,138,19],[149,22,138,20,"data"],[149,26,138,24],[150,4,139,2],[150,5,139,3],[151,4,141,2,"getCurrentUser"],[151,18,141,16],[151,20,141,18],[151,26,141,18,"getCurrentUser"],[151,27,141,18],[151,32,141,45],[152,6,142,4],[152,12,142,10,"response"],[152,20,142,18],[152,23,142,21],[152,29,142,27,"api"],[152,32,142,30],[152,33,142,31,"get"],[152,36,142,34],[152,37,142,41],[152,47,142,51],[152,48,142,52],[153,6,143,4],[153,13,143,11,"response"],[153,21,143,19],[153,22,143,20,"data"],[153,26,143,24],[154,4,144,2],[154,5,144,3],[155,4,146,2,"testAuth"],[155,12,146,10],[155,14,146,12],[155,20,146,12,"testAuth"],[155,21,146,12],[155,26,146,74],[156,6,147,4],[156,12,147,10,"response"],[156,20,147,18],[156,23,147,21],[156,29,147,27,"api"],[156,32,147,30],[156,33,147,31,"get"],[156,36,147,34],[156,37,147,35],[156,53,147,51],[156,54,147,52],[157,6,148,4],[157,13,148,11,"response"],[157,21,148,19],[157,22,148,20,"data"],[157,26,148,24],[158,4,149,2],[159,2,150,0],[159,3,150,1],[160,2,152,0],[160,6,152,0,"_default"],[160,14,152,0],[160,17,152,15,"api"],[160,20,152,18],[161,0,152,19],[161,3]],"functionMap":{"names":["<global>","getAPIUrl","secureStorage.getItem","secureStorage.setItem","secureStorage.deleteItem","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1","authAPI.register","authAPI.login","authAPI.getCurrentUser","authAPI.testAuth"],"mappings":"AAA;kBCQ;CDuB;EEiB;GFM;EGC;GHM;EIC;GJM;EKO;GLU;EMC;GNE;EOK,sBP;EQC;GRM;YS8B;GTG;SUE;GVG;kBWE;GXG;YYE;GZG"},"hasCjsExports":false},"type":"js/module"}]}